# stackies!(技術スタック・案件管理システム) 要件定義

## 1. ビジネス要件

### 1.1 システム開発の背景・目的

#### 1.1.1 背景
##### 個人レベルの課題
- エンジニアのキャリア管理において、技術経験の定量的な記録・管理が困難
- 案件参画時の技術選定や自己アピール時に、正確な経験年数やスキルレベルの把握が不十分
- 個人のスキルセット可視化による戦略的なキャリア形成の必要性

##### 組織レベルの課題
- IT企業・開発チームにおけるメンバーのスキルセット把握の困難さ
- プロジェクトアサイン時の適材適所判断の非効率性
- 組織全体の技術ポートフォリオ管理の不備
- 人材育成・キャリア開発計画の策定根拠不足
- 新規案件受注時の組織能力評価の困難さ

#### 1.1.2 目的
##### 個人レベルの目的
- 個人の技術経験を体系的に記録・管理する
- 技術スタックの定量的な評価によるキャリア戦略立案支援
- 案件選択・技術学習の意思決定支援

##### 組織レベルの目的
- 組織全体の技術ポートフォリオの可視化・管理
- プロジェクトアサインの最適化と効率化
- データドリブンな人材育成計画の策定
- 組織の技術的競争力向上と戦略立案支援
- 新規事業・案件受注時の組織能力評価基盤提供

#### 1.1.3 期待効果
##### 個人レベルの効果
- エンジニアの技術経験の見える化（定量化）
- キャリア形成の戦略的立案による市場価値向上
- 案件マッチング精度向上による適材適所の実現

##### 組織レベルの効果
- プロジェクトアサイン効率の向上（30%以上の時間短縮）
- 組織全体の技術レベル可視化による競争力向上
- 数据根拠に基づく人材育成ROIの最大化
- 新規案件受注率の向上（組織能力証明の客観化）
- メンバーのエンゲージメント向上（キャリアパスの明確化）

### 1.2 システム概要
個人エンジニアおよび組織（会社・チーム）が、案件経験と技術スタックを体系的に管理し、データドリブンな意思決定を支援する統合プラットフォーム。個人のキャリア開発から組織の技術管理までをカバーするスケーラブルなシステム。

### 1.3 システム利用者

#### 1.3.1 プライマリユーザー
- **個人エンジニア**：自身のキャリア管理を行うユーザー
- **チームリーダー/マネージャー**：チームメンバーのスキル管理とプロジェクトアサインを行う
- **HR/人事担当者**：組織全体の人材育成とキャリア開発を管理する

#### 1.3.2 セカンダリユーザー
- **経営層/CTO**：組織の技術戦略立案と意思決定に利用
- **営業担当者**：新規案件受注時の組織能力評価に利用
- **システム管理者**：システムの運用・保守を行う

## 2. システム要件

### 2.1 機能要件

#### 2.1.1 案件管理機能

##### 案件情報登録
- 案件名
- 期間（開始日・終了日）
- 担当したポジション（例：フロントエンドエンジニア、バックエンドエンジニア、フルスタック等）
- プロジェクトの概要
- 所属組織（会社・部署・チーム）
- プロジェクトメンバー情報（チーム構成）
- その時の気持ち・感想コメント
- 成果物・成果指標

##### 案件情報表示・編集
- 案件一覧表示（個人・チーム・組織別）
- 案件詳細表示
- 案件情報の編集・削除
- チームメンバーの案件参照権限設定

#### 2.1.2 技術スタック管理機能

##### 技術スタック登録
- 技術名（例：React, Node.js, PostgreSQL等）
- カテゴリ（フロントエンド、バックエンド、データベース、インフラ等）
- 累計経験年数（自動計算）
- スキルレベル（⭐️1〜5で表示）

##### 技術スタック更新
- スキルレベルの手動更新（⭐️マーク）
- 経験年数の自動更新（案件期間から算出）

##### 技術スタック表示
- 技術スタック一覧表示
- カテゴリ別表示
- スキルレベル順表示

#### 2.1.3 案件-技術スタック関連付け機能

##### 案件で使用した技術の登録
- 案件に対して使用した技術スタックを関連付け
- 各技術の使用期間（案件期間内での実際の使用期間）

##### 経験年数の自動集計
- 案件で使用した技術の期間を累計経験年数に反映
- 重複期間の適切な処理

#### 2.1.4 統計・レポート機能

##### 個人レベル統計
- 技術別の累計経験年数ランキング
- カテゴリ別の技術分布
- スキルレベル別の技術一覧
- 年別の案件数
- ポジション別の案件分析
- 期間別の技術トレンド

##### チームレベル統計
- チーム全体の技術ポートフォリオ可視化
- メンバー間のスキルギャップ分析
- プロジェクトアサイン最適化推奨
- チームスキルマトリックス（ヒートマップ）
- 技術習得進捗状況トラッキング

##### 組織レベル統計
- 組織全体の技術的競争力分析
- 部署・チーム間のスキル比較
- 人材リソース配置最適化推奨
- 組織スキルロードマップ
- 新規技術導入インパクト予測
- 人材育成ROI分析

#### 2.1.5 アカウント管理機能

##### ユーザー登録・認証
- ユーザー新規登録（メールアドレス・電話番号）
- メールアドレス験証機能
- パスワード強度チェック機能
- ソーシャルログイン（Google、GitHub、LinkedIn）
- アカウントアクティベーション機能
- パスワードリセット機能

##### プロフィール管理
- 個人情報管理（名前、アバター、連絡先）
- キャリア情報管理（経歴、職歴、保有資格）
- ソーシャルリンク管理（GitHub、LinkedIn、ポートフォリオサイト）
- プロフィールの公開レベル設定（組織内・一般公開・非公開）
- プロフィール写真・アバター管理

##### アカウント設定
- 言語・タイムゾーン設定
- パスワード変更機能
- 2段階認証（MFA）設定
- セッション管理（アクティブセッション一覧・終了）
- ログイン履歴の表示
- アカウント連携管理（外部サービス連携）

##### 通知設定
- メール通知設定（プロジェクト更新、システムお知らせ）
- プッシュ通知設定（モバイルアプリ向け）
- Slack/Teams通知連携設定
- 通知頻度設定（リアルタイム・日次・週次）
- 通知カテゴリ別ON/OFF設定

##### データ管理
- データエクスポート機能（JSON、CSV、PDF形式）
- データインポート機能（他システムからの移行）
- データバックアップ・リストア機能
- 個人データの一括削除機能（GDPR対応）
- データ保存期間設定

#### 2.1.6 組織アカウント管理機能

##### 組織アカウント管理
- 組織情報登録・管理（会社名、住所、連絡先）
- サブスクリプションプラン管理
- 課金・支払い情報管理
- 組織設定（タイムゾーン、言語、ブランディング）
- ドメイン験証設定（メールドメイン制限）

##### ユーザー招待・オンボーディング
- メール招待機能（個別・一括招待）
- 招待リンクの期限設定
- 初期ロール設定（新メンバーのデフォルト権限）
- オンボーディングチェックリスト
- CSVインポートによる一括ユーザー登録
- Active Directory/LDAP連携

##### アカウント一括管理
- ユーザー一覧・検索機能
- ユーザーステータス管理（アクティブ・停止・削除）
- ユーザー情報の一括編集機能
- ロール・権限の一括変更
- ユーザーアクティビティログの監視
- パスワードポリシー設定（強度、有効期限）

#### 2.1.7 組織管理機能

##### 会社・組織管理
- 会社情報の登録・管理
- 部署・チーム構成の管理
- 組織階層の設定・更新
- 組織図の自動生成

##### メンバー管理
- メンバーの組織長待・異動管理
- 役職・ポジションの設定
- メンバープロフィール管理
- 入退社時のデータ引き継ぎ・削除

##### プロジェクトアサイン機能
- プロジェクト要件に基づく最適メンバー推奨
- スキルマッチングアルゴリズム
- ワークロード平均化機能
- アサイン履歴管理

### 2.2 非機能要件

#### 2.2.1 ユーザビリティ
- 直感的で使いやすいUI/UX（ロール別カスタマイズ対応）
- レスポンシブデザイン（PC・タブレット・スマートフォン対応）
- 日本語対応（将来的に多言語対応可能）
- マルチテナント対応（組織間データ分離）

#### 2.2.1.1 ユーザー権限管理
##### ロール定義
- **システム管理者**：システム全体の管理権限
- **組織管理者**：所属組織内の全データアクセス・管理権限
- **チームリーダー**：担当チームのデータ参照・管理権限
- **プロジェクトマネージャー**：担当プロジェクトのデータ参照・管理権限
- **一般ユーザー（エンジニア）**：自分のデータのみ管理権限
- **閲覧ユーザー**：指定されたデータの参照のみ

##### 権限制御機能
- 細かな権限設定（リソースレベルでのアクセス制御）
- 動的権限変更（プロジェクト参加時の一時的権限付与）
- ユーザーグループ管理（部署・チーム別グループ化）
- 権限変更履歴の記録・監視

##### データアクセス制御
- 組織間データの完全分離
- 個人情報のプライバシー保護
- チーム横断情報の表示・非表示制御
- 機密情報のマスキング機能

#### 2.2.2 パフォーマンス
- ページ読み込み時間：3秒以内
- データベースクエリの最適化

#### 2.2.3 セキュリティ
##### 認証・認可（マルチテナント対応）
- OAuth 2.0 + JWTトークンによるユーザー認証
- シングルサインオン（SSO）対応（SAML/OIDC）
- マルチファクター認証（MFA）対応
- ロールベースアクセス制御（RBAC）
- 属性ベースアクセス制御（ABAC）
- セッション管理（タイムアウト機能、同時ログイン制限）
- テナント間アクセス分離（組織横断アクセス防止）

##### データ保護（企業レベル）
- 個人情報（PII）の暗号化保存
- 機密情報のマスキング・仮名化
- パスワードのハッシュ化（bcrypt等）
- データベース暗号化（休止時・転送時）
- データロス防止（DLP）機能
- バックアップデータの暗号化

##### 通信セキュリティ
- TLS 1.3以上でのHTTPS通信
- APIエンドポイントのレートリミッティング
- CORSポリシーの適切な設定
- CSP（Content Security Policy）ヘッダーの設定
- WAF（Web Application Firewall）連携

##### 脅威対策（企業環境対応）
- SQLインジェクション対策（プリペアドステートメント使用）
- XSS対策（エスケープ処理・サニタイゼーション）
- CSRF対策（CSRFトークンの実装）
- インサイダー脅威対策（アクセスログ監視、異常検知）
- ゼロトラストセキュリティモデルの導入
- セキュリティインシデント対応手順（SIEM連携）

##### 監査・コンプライアンス
- 全アクセスログの記録・保存（最低7年間）
- ユーザー操作のトレーサビリティ確保
- コンプライアンスレポートの自動生成
- 外部監査対応機能

#### 2.2.4 拡張性
- 新しい技術スタックの追加が容易
- 機能追加に対応できる設計

#### 2.2.5 データ整合性
- データの一貫性保証
- バックアップ・復旧機能

## 3. リスク管理

### 3.1 プロジェクトリスク

#### 3.1.1 技術リスク
- **データ一意性リスク**：経験年数算出ロジックの複雑性
  - 対策：データ整合性チェック機能の実装
- **パフォーマンスリスク**：大量データ処理時のレスポンス遅延
  - 対策：ページネーション・キャッシュ機能の実装

#### 3.1.2 セキュリティリスク
- **情報漏洩リスク**：個人の技術情報の不正アクセス
  - 対策：アクセスログ監視・権限管理の徹底
- **認証バイパスリスク**：認証システムの脆弱性
  - 対策：多層防御・定期セキュリティ診断

#### 3.1.3 運用リスク
- **データ消失リスク**：システム障害時のデータ消失
  - 対策：自動バックアップ・ディザスタリカバリ計画
- **可用性リスク**：サービス停止時の業務影響
  - 対策：冗長構成・ヘルスチェック機能

### 3.2 リスク評価マトリックス

| リスク項目 | 発生確率 | 影響度 | リスクレベル | 対応優先度 |
|------------|----------|--------|-------------|----------|
| データ一意性 | 中 | 高 | 高 | 1 |
| 情報漏洩 | 低 | 高 | 中 | 2 |
| パフォーマンス | 中 | 中 | 中 | 3 |
| データ消失 | 低 | 高 | 中 | 2 |
| 可用性 | 低 | 中 | 低 | 4 |

## 4. 制約条件

### 4.1 技術制約

#### 4.1.1 フロントエンド
- docs/frontend.md に従った実装

#### 4.1.2 バックエンド
- docs/backend.md に従った実装

#### 4.1.3 データベース
- sql-migrate を使用したマイグレーション管理

### 4.2 プロジェクト制約

#### 4.2.1 スケジュール制約
- 開発期間：6ヶ月以内でのMVPリリース
- フェーズ1：基本機能実装（3ヶ月）
- フェーズ2：高度な統計機能実装（3ヶ月）

#### 4.2.2 人的リソース制約
- フルスタックエンジニア：1名
- UI/UXデザイナー：必要時のみ外部委託

#### 4.2.3 予算制約
- インフラコスト：月額10,000円以内
- 外部サービス組み込みコスト：月額5,000円以内

### 4.3 法的制約

#### 4.3.1 コンプライアンス要件
- 個人情報保護法対応
- GDPRコンプライアンス（将来的な国際展開時）

#### 4.3.2 ライセンス制約
- オープンソースライセンスの遵守
- 商用ライセンスが必要なライブラリの適切な管理

## 5. 運用・保守要件

### 5.1 運用要件

#### 5.1.1 可用性要件（企業レベル）
- サービス稼働率：99.5%以上（月次）、99.9%以上（年次）
- メンテナンスウィンドウ：毎週日曜日 2:00-6:00（タイムゾーン考慮）
- ダウンタイムアラート：3分以内に通知（マルチチャネル）
- ロードバランシングとフェイルオーバー機能
- マルチリージョン対応（災害対策）

#### 5.1.2 バックアップ・リストア要件（企業レベル）
- データベースバックアップ：日次全量 + 時間次差分バックアップ
- バックアップ保存期間：日次：90日、週次：1年、月次：7年
- データリストア時間：2時間以内（RTO）
- データロス許容範囲：1時間以内（RPO）
- クロスリージョンバックアップ（地理的分散）
- バックアップデータの整合性チェックとリストアテスト

#### 5.1.3 モニタリング要件（企業レベル）
- システムパフォーマンス監視（CPU、メモリ、ディスク、ネットワーク使用率）
- アプリケーションログ監視（エラーログ、アクセスログ、セキュリティログ）
- ユーザー行動分析（アクセス統計、機能利用率、ユーザーエクスペリエンス）
- ビジネスメトリクス監視（ユーザー数、データ量、組織別利用状況）
- リアルタイムアラートシステム（Slack/Teams/メール連携）
- SLA監視ダッシュボード

#### 5.1.4 スケーラビリティ要件
- ユーザー数スケール：10,000ユーザーまで対応
- テナント数スケール：1,000組織まで対応
- データ量スケール：ペタバイトレベルまで対応
- 水平スケール（オートスケール）対応

### 5.2 保守要件

#### 5.2.1 保守性要件（企業レベル）
- コードの可読性：標準的なコーディング規約の遵守（ESLint/Prettier等）
- ドキュメント維持：APIドキュメントの自動更新（OpenAPI/Swagger）
- テストカバレッジ：85%以上のコードカバレッジ
- コード品質管理：SonarQube等のコード解析ツール連携
- モジュラー設計（異なる組織の要求に対応可能）
- APIバージョニング戦略（後方互換性保証）

#### 5.2.2 更新・アップグレード要件（企業レベル）
- セキュリティパッチ：発見から本番適用4時間以内（緊急度高）
- 機能アップデート：週次リリースサイクル（継続的デプロイ）
- メジャーバージョンアップ：四半期サイクル（事前通知・テスト期間あり）
- ロールバック機能（ゼロダウンタイムデプロイ）
- A/Bテスト機能（段階的ロールアウト）
- テナント別メンテナンスウィンドウ設定機能

#### 5.2.3 組織管理運用要件
- マルチテナント管理（組織別設定・カスタマイズ）
- ユーザーオンボーディング自動化（CSVインポート・AD連携）
- 組織変更時のデータ移行サポート
- コンプライアンスレポートの自動生成
- SLAレポートの定期生成・配信

## 6. 品質要件

### 6.1 信頼性要件
- システム障害発生率：月間1回以下
- データ不整合発生率：0.01%以下
- エラーハンドリング：すべての例外ケースに対する適切な処理

### 6.2 ユーザビリティ品質
- タスク完了率：新規ユーザーの90%が初回アクセス時に案件登録を完了
- ユーザー満足度：NPSスコア30以上
- アクセシビリティ：WCAG 2.1 AAレベルの準拠

### 6.3 パフォーマンス品質
- 初回ページ読み込み：3秒以内（PC、モバイル共通）
- APIレスポンス時間：500ms以内（通常クエリ）
- コンカレントユーザー数：1000ユーザー同時アクセスに対応

## 7. ユーザーストーリー

### 7.1 個人ユーザーストーリー

#### 7.1.1 アカウント管理
- エンジニアとして、自分のアカウントを簡単に作成したい
- プロフィール情報を管理し、自分のキャリアをアピールしたい
- 個人情報の公開レベルをコントロールしたい
- セキュリティを強化するため、2FAを設定したい

#### 7.1.2 案件記録
- エンジニアとして、新しく参画した案件の情報を記録したい
- 案件終了時に、その時の感想や学びをコメントとして残したい
- チームメンバーとの連携情報を記録したい

#### 7.1.3 技術スタック管理
- 自分の技術スタックの現在のレベルを正確に把握したい
- 各技術の累計経験年数を自動で計算してほしい
- スキルアップに応じてレベルを更新したい

#### 7.1.4 キャリア分析
- 自分のキャリアの変遷を可視化したい
- どの技術にどのくらいの経験があるかを一目で確認したい
- 案件選択の参考にするため、技術トレンドを分析したい

### 7.2 チームリーダー/マネージャーストーリー

#### 7.2.1 チーム管理
- チームリーダーとして、メンバーのスキルレベルを把握したい
- プロジェクトに最適なメンバーをアサインしたい
- チームのスキルギャップを特定し、育成計画を立てたい

#### 7.2.2 ユーザー管理
- メンバーを招待し、スムーズなオンボーディングを実現したい
- メンバーの権限を適切に管理したい
- メンバーのアクティビティを監視したい

### 7.3 HR/人事担当者ストーリー

#### 7.3.1 組織レベル管理
- 人事担当者として、全社員のスキルマップを把握したい
- 組織の技術的強み・弱みを分析したい
- データに基づいた人材育成計画を立案したい

#### 7.3.2 アカウント管理
- 大量のユーザーアカウントを効率的に管理したい
- セキュリティポリシーを統一的に適用したい
- コンプライアンスレポートを自動生成したい

### 7.4 経営層/CTOストーリー

#### 7.4.1 戦略的意思決定
- 経営層として、組織の技術戦略をデータドリブンで立案したい
- 競合他社との技術的競争力を比較したい
- 投資対效果の高い技術分野を特定したい

#### 7.4.2 組織管理
- 全社的なアカウントセキュリティポリシーを設定したい
- システムの利用状況とROIを監視したい
- コンプライアンス状況を把握したい

## 8. 画面遷移・ワイヤーフレーム

### 8.1 主要画面
- ダッシュボード（統計サマリー）
- 案件一覧・詳細画面
- 技術スタック一覧・詳細画面
- 案件登録・編集画面
- 技術スタック登録・編集画面

## 9. データモデル概要

### 9.1 主要エンティティ（マルチテナント対応）

#### 9.1.1 組織関連エンティティ
- Organization（組織・会社）
- Department（部署）
- Team（チーム）
- Role（役職・ロール）
- Permission（権限）

#### 9.1.2 ユーザー関連エンティティ
- User（ユーザー）
- UserProfile（ユーザープロフィール）
- UserSettings（ユーザー設定）
- UserSession（ユーザーセッション）
- UserOrganization（ユーザー-組織関連）
- UserRole（ユーザー-ロール関連）
- UserInvitation（ユーザー招待）
- UserNotification（ユーザー通知）

#### 9.1.3 プロジェクト関連エンティティ
- Project（案件）
- ProjectMember（プロジェクトメンバー）
- ProjectTechnology（案件-技術関連）

#### 9.1.4 技術・スキル関連エンティティ
- Technology（技術スタック）
- TechnologyCategory（技術カテゴリ）
- Skill（スキル情報）
- UserSkill（ユーザー-スキル関連）

#### 9.1.5 統計・レポート関連エンティティ
- Report（レポート）
- Analytics（分析データ）
- AuditLog（監査ログ）

#### 9.1.6 アカウント管理関連エンティティ
- UserAuth（ユーザー認証情報）
- UserMFA（多要素認証設定）
- PasswordPolicy（パスワードポリシー）
- LoginHistory（ログイン履歴）
- UserDataExport（データエクスポート履歴）

## 10. 今後の拡張可能性

### 10.1 機能拡張
- AIパワード機能
  - 技術トレンド予測と推奨
  - スキルギャップ分析と学習パス推奨
  - プロジェクトマッチングのAI最適化
- 外部サービス連携
  - GitHub/GitLabのコミット情報連携
  - LinkedInプロフィール同期
  - Slack/Teamsボット連携
  - Jira/Confluence連携
- スキル証明・資格管理
  - デジタルバッジ系統連携
  - 資格試験スケジュール管理
  - スキル検定・評価機能

### 10.2 技術拡張
- モバイルアプリ対応（iOS/Androidネイティブアプリ）
- APIエコシステム展開（サードパーティ連携）
- ブロックチェーン技術連携（スキル証明の信頼性向上）
- IoTデバイス連携（ウェアラブルデバイス等）

### 10.3 グローバル展開
- 多言語対応（英語、中国語、韓国語等）
- タイムゾーン対応（グローバルチーム管理）
- 各国のコンプライアンス法令対応

### 10.4 エンタープライズ機能
- オンプレミス展開対応
- プライベートクラウド対応
- カスタムフィールド機能（組織固有のメタデータ管理）
- エンタープライズサーチ（全社横断検索）